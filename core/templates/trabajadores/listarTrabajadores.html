{% extends 'core/base.html' %}

{% block content %}

{% if request.user.is_authenticated %}
{% load static %}
<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <h1 class="text-center">Listado de Trabajadores</h1>
      <form action="" method="GET">
        <div class="input-group mb-3">
          <input type="text" class="form-control" placeholder="Buscar por RUT" aria-label="Recipient's username" aria-describedby="button-addon2" name="search">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Buscar</button>
          </div>
        </div>
      
      <table class="table table-bordered">
        <thead>
          <tr>
            <th scope="col">RUT</th>
            <th scope="col">Nombre</th>
            <th scope="col">Apellido</th>
            <th scope="col">Correo</th>
            <th scope="col">Grupo</th>
            <th scope="col">Acciones</th>
            
          </tr>
        </thead>
        <tbody>
       {% for user in users %}
          <tr>
            <th scope="row">{{ user.rut }}</th>
            <td>{{ user.first_name }}</td>
            <td>{{ user.last_name }}</td>
            <td>{{ user.email }}</td>
            {% for group in user.groups.all %}
            <td>{{ group }}</td> 
        {% endfor %}
            <td>
              <a class="btn btn-warning botonEditar" href="{% url 'editarTrabajadores' user.rut %}" role="button"><i class="fas fa-pen"></i></button>
              <a class="btn btn-danger botonEliminar" href="{% url 'eliminarTrabajadores' user.rut %}" role="button"><i class="fas fa-trash-alt"></i></button>
            </td>
          </tr>
          {% endfor %}

        </tbody>

    </div>
  </div>
</div>
{% endif %}

{% endblock %}